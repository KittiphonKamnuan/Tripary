<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Your Trip</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datepicker/1.0.10/datepicker.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        main {
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        main h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        form label {
            font-weight: bold;
            color: #333;
        }
        form input, form button {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        form input:focus, form button:focus {
            border-color: #4CAF50;
            outline: none;
        }
        .category-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .category-buttons button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .category-buttons button:hover {
            background-color: #45a049;
        }
        form button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        form button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <header class="header">
        <img src="pic/uplogo.jpg" alt="TRIPARY Logo" class="logo">
        <nav>
            <a href="index.html">HOME</a>
            <a href="#">MEMBER</a>
            <a href="#">ABOUT</a>
            <a href="contact.html">CONTACT</a>
            <a href="login.html">LOGIN</a>
        </nav>
    </header>

    <main>
        <h1>Plan Your Trip</h1>
        <form id="tripForm" action="/submit-trip" method="POST">
            <label for="numPeople">Number of People:</label>
            <input type="number" id="numPeople" name="numPeople" required>

            <div style="display: flex; gap: 15px;">
                <div style="flex: 1;">
                    <label for="startDate">Start Date:</label>
                    <input type="text" id="startDate" name="startDate" class="datepicker-here" data-language="en" required>
                </div>
                <div style="flex: 1;">
                    <label for="endDate">End Date:</label>
                    <input type="text" id="endDate" name="endDate" class="datepicker-here" data-language="en" required>
                </div>
            </div>

            <label for="budget">Budget:</label>
            <div>
                <button type="button" onclick="adjustBudget(500, '-')">-</button>
                <input type="number" id="budget" name="budget" value="0" readonly>
                <button type="button" onclick="adjustBudget(500, '+')">+</button>
            </div>

            <label for="category">Category:</label>
            <div class="category-buttons">
                <button type="button" onclick="selectCategory('beach')">Beach</button>
                <button type="button" onclick="selectCategory('mountain')">Mountain</button>
                <button type="button" onclick="selectCategory('city')">City</button>
                <button type="button" onclick="selectCategory('cultural')">Cultural</button>
            </div>
            <input type="text" id="customCategory" name="customCategory" placeholder="Or enter custom category">

            <label for="province">Province:</label>
            <input type="text" id="province" name="province" oninput="suggestProvince(this.value)" list="provinceList" required>
            <datalist id="provinceList">
                <optgroup label="Northern Region">
                    <option value="Chiang Mai">
                    <option value="Mae Hong Son">
                    <option value="Chiang Rai">
                    <option value="Lamphun">
                    <option value="Lampang">
                    <option value="Phayao">
                    <option value="Phrae">
                    <option value="Nan">
                    <option value="Uttaradit">
                    <option value="Tak">
                    <option value="Sukhothai">
                    <option value="Phitsanulok">
                    <option value="Kamphaeng Phet">
                    <option value="Phetchabun">
                </optgroup>
                <optgroup label="Northeastern Region">
                    <option value="Kalasin">
                    <option value="Khon Kaen">
                    <option value="Chaiyaphum">
                    <option value="Nakhon Phanom">
                    <option value="Nakhon Ratchasima">
                    <option value="Buriram">
                    <option value="Maha Sarakham">
                    <option value="Mukdahan">
                    <option value="Yasothon">
                    <option value="Roi Et">
                    <option value="Loei">
                    <option value="Sakon Nakhon">
                    <option value="Nong Khai">
                    <option value="Nong Bua Lamphu">
                    <option value="Udon Thani">
                    <option value="Amnat Charoen">
                </optgroup>
                <optgroup label="Central Region">
                    <option value="Bangkok">
                    <option value="Uthai Thani">
                    <option value="Chai Nat">
                    <option value="Nakhon Sawan">
                    <option value="Nonthaburi">
                    <option value="Pathum Thani">
                    <option value="Ayutthaya">
                    <option value="Lopburi">
                    <option value="Samut Prakan">
                    <option value="Samut Songkhram">
                    <option value="Samut Sakhon">
                    <option value="Saraburi">
                    <option value="Sing Buri">
                    <option value="Ang Thong">
                </optgroup>
                <optgroup label="Eastern Region">
                    <option value="Chon Buri">
                    <option value="Rayong">
                    <option value="Chanthaburi">
                    <option value="Trat">
                    <option value="Nakhon Nayok">
                    <option value="Chachoengsao">
                    <option value="Prachin Buri">
                    <option value="Sa Kaeo">
                </optgroup>
                <optgroup label="Western Region">
                    <option value="Kanchanaburi">
                    <option value="Prachuap Khiri Khan">
                    <option value="Suphan Buri">
                    <option value="Phetchaburi">
                    <option value="Nakhon Pathom">
                    <option value="Ratchaburi">
                </optgroup>
                <optgroup label="Southern Region">
                    <option value="Krabi">
                    <option value="Chumphon">
                    <option value="Trang">
                    <option value="Nakhon Si Thammarat">
                    <option value="Narathiwat">
                    <option value="Pattani">
                    <option value="Phang Nga">
                    <option value="Phatthalung">
                    <option value="Phuket">
                    <option value="Yala">
                    <option value="Ranong">
                    <option value="Songkhla">
                    <option value="Satun">
                    <option value="Surat Thani">
                </optgroup>
            </datalist>
                <button type="submit">Submit</button>
            </form>
        </main>
    
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/datepicker/1.0.10/datepicker.min.js"></script>
        <script>
            $(document).ready(function() {
                $('.datepicker-here').datepicker({
                    dateFormat: 'yyyy-mm-dd',
                    language: 'en',
                    minDate: new Date()  // Set minimum date to today
                });
            });
    
            document.getElementById('tripForm').addEventListener('submit', function(event) {
                event.preventDefault();
                validateForm();
            });
    
            function selectCategory(category) {
                document.getElementById('customCategory').value = category;
            }
    
            function adjustBudget(amount, operation) {
                let budgetInput = document.getElementById('budget');
                let currentBudget = parseInt(budgetInput.value);
    
                if (operation === '+') {
                    currentBudget += amount;
                } else {
                    if (currentBudget >= amount) {
                        currentBudget -= amount;
                    } else {
                        alert('Budget cannot be negative.');
                        return;
                    }
                }
    
                budgetInput.value = currentBudget;
            }
    
            function suggestProvince(input) {
                let datalist = document.getElementById('provinceList');
                datalist.innerHTML = '';
    
                const provincesByRegion = {
                    "ภาคเหนือ": ["Chiang Mai", "Mae Hong Son", "Chiang Rai", "Lamphun", "Lampang", "Phayao", "Phrae", "Nan", "Uttaradit", "Tak", "Sukhothai", "Phitsanulok", "Kamphaeng Phet", "Phetchabun"],
                    "ภาคตะวันออกเฉียงเหนือ": ["Kalasin", "Khon Kaen", "Chaiyaphum", "Nakhon Phanom", "Nakhon Ratchasima", "Buriram", "Maha Sarakham", "Mukdahan", "Yasothon", "Roi Et", "Loei", "Sakon Nakhon", "Nong Khai", "Nong Bua Lamphu", "Udon Thani", "Amnat Charoen"],
                    "ภาคกลาง": ["Bangkok", "Uthai Thani", "Chai Nat", "Nakhon Sawan", "Nonthaburi", "Pathum Thani", "Ayutthaya", "Lopburi", "Samut Prakan", "Samut Songkhram", "Samut Sakhon", "Saraburi", "Sing Buri", "Ang Thong"],
                    "ภาคตะวันออก": ["Chon Buri", "Rayong", "Chanthaburi", "Trat", "Nakhon Nayok", "Chachoengsao", "Prachin Buri", "Sa Kaeo"],
                    "ภาคตะวันตก": ["Kanchanaburi", "Prachuap Khiri Khan", "Suphan Buri", "Phetchaburi", "Nakhon Pathom", "Ratchaburi"],
                    "ภาคใต้": ["Krabi", "Chumphon", "Trang", "Nakhon Si Thammarat", "Narathiwat", "Pattani", "Phang Nga", "Phatthalung", "Phuket", "Yala", "Ranong", "Songkhla", "Satun", "Surat Thani"]
                };                
    
                provinces.forEach(province => {
                    if (province.includes(input)) {
                        let option = document.createElement('option');
                        option.value = province;
                        datalist.appendChild(option);
                    }
                });
            }
    
            function validateForm() {
                const numPeople = document.getElementById('numPeople').value;
                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;
                const budget = document.getElementById('budget').value;
                const category = document.getElementById('customCategory').value;
                const province = document.getElementById('province').value;
    
                if (!numPeople || !startDate || !endDate || !budget || !category || !province) {
                    alert('Please fill in all the fields.');
                    return;
                }
    
                // Convert budget to a number
                const budgetValue = parseInt(budget);
    
                // Validate if End Date is not earlier than Start Date
                if (new Date(endDate) < new Date(startDate)) {
                    alert('End Date cannot be earlier than Start Date.');
                    return;
                }
    
                alert(`Trip Details:
    Number of People: ${numPeople}
    Start Date: ${startDate}
    End Date: ${endDate}
    Budget: ${budgetValue}
    Category: ${category}
    Province: ${province}`);
    
                console.log({ numPeople, startDate, endDate, budget: budgetValue, category, province });
            }
        </script>
    </body>
    </html>